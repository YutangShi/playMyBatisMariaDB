<!DOCTYPE html>
<html >
  <head>
    <meta charset="UTF-8">
    <title>編輯個人資料</title>
	
	@views.html.web.headerLibs()
	
	@views.html.web.loginSignup.loginSignupLibs()
	
	<style>	
	#headerPicPreview {
	   max-height: 300px;
   	   width: 250px;
	   width: 50%;
	   height: 50%;
	}
	</style>
  </head>

  <body>
	<div id="page-wrapper">
		<div id="select_nav_user">@views.html.web.headerNav()</div>
	</div>
    <div class="form">
      
      <ul class="tab-group">
	    <li class="tab active"><a>編輯個人資料</a></li>
      </ul>
      <div class="tab-content">
        <div id="Form" > 
          <form action="@controllers.routes.WebController.editProfile.url" method="post" id="editProfile">
			<div class="field-wrap">
				<img src="" id="headerPicPreview"/>
				<label class="lable-field-wrap">頭像照片網址</label>
				<input type="text" required autocomplete="off" id="headerPicLink" name="headerPicLink"/>
			</div>
			<div class="field-wrap">
				<label class="lable-field-wrap">使用者名稱</label>
				<input type="text" required autocomplete="off" name="username"/>
			</div>
			<div class="field-wrap">
				<label class="lable-field-wrap">暱稱</label>
				<input type="text" required autocomplete="off" name="nickName"/>
			</div>
			<div class="field-wrap">
				<label class="lable-field-wrap">手機號碼</label>
				<input type="text" required autocomplete="off" name="telphone"/>
			</div>
			<a>
				<input type="submit" value="SUBMIT" class="button button-block">
			</a>
			</form>
        </div>
		</div><!-- tab-content -->   
	</div> <!-- /form -->
	<div id="titleBar"></div>

	<script src='@routes.Assets.versioned("javascripts/loginSignup.js")'></script>
	<script type ="application/javascript">
		$( document ).ready(function() {
			document.getElementById("editProfile").reset();
			// 一開始不顯示頭像
			document.getElementById("headerPicPreview").style.display = "none";
		});

		// 使用者離開欄位時才發動
		$("#headerPicLink").blur("change paste keyup", function() {
			if(isURL($("#headerPicLink").val())){
   				$.ajax({
		   		    url:$("#headerPicLink").val(),
		   		    error:
		   		        function(){
				    		$("#headerPicPreview").hide();
		   		        },
		   		    success:
		   		        function(){
					    	$("#headerPicPreview").attr("src" , $("#headerPicLink").val());
					    	$("#headerPicPreview").show();
	   		        	}
  		      	});
			} else {
				$("#headerPicPreview").hide();
			}
    		   
		});
		
		// 確認是否是網址
		function isURL(str) {
		  var pattern = new RegExp(/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/i); 
		  return pattern.test(str);
		}

	</script>
  </body>
</html>
